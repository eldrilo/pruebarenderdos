<ion-content >
  <main class="bigimage">
    <!-- Carousel -->
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
      <div class="container-fluid">

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <h1 class="nav-link active" aria-current="page">Categorias</h1>
            </li>

            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle"  role="button" data-bs-toggle="dropdown" aria-expanded="false">
                Filtro de selección
              </a>
              <ul class="dropdown-menu">
                <li *ngFor="let categoria of categorias">
                  <a class="dropdown-item"  (click)="filtrarPorCategoria(categoria.id_categoria, categoria.nombre_categoria)" >{{ categoria.nombre_categoria }}</a>
                </li>
                <a class="dropdown-item" *ngIf="categoriaSeleccionada" (click)="quitarFiltro()">Quitar filtro</a>
              </ul>
            </li>
            <li class="nav-item">
              <a class="nav-link disabled" aria-disabled="true">{{ categoriaSeleccionada || 'Sin filtro' }}</a>
            </li>
            <!-- <li class="nav-item">
              <button class="button" *ngIf="categoriaSeleccionada" (click)="quitarFiltro()">Quitar filtro</button>
            </li> -->
          </ul>
          <form class="d-flex" role="search">
            <ion-input class="form-control me-2" type="search" placeholder="Search" aria-label="Search" (ionInput)="onSearch($event)"></ion-input>
            <button class="btn btn-outline-success" type="submit">Search</button>
          </form>
        </div>
      </div>
    </nav>
    <section class="text-center container" style="color: black;">
      <ion-grid>
        <ion-row class="ion-justify-content-center py-4">
          <ion-col size-md="8" size-sm="12" class="ion-text-center">
            <!-- Imagen antes del título -->
            <img src="../../../../assets/images/logo.png" alt="Imagen descriptiva" class="img-fluid mb-4">
            <h1 class="fw-light">Productos Destacados</h1>
            <p class="lead text-secondary">ESTE APARTADO ESTARA PROXIMAMENTE DISPONIBLE</p>
          </ion-col>
        </ion-row>
      </ion-grid>
    </section>
    <!-- Product Grid -->

    <div >
      <div class="container" >
        <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">


          <ion-col size="12" size-md="6" size-lg="4" *ngFor="let producto of productosFiltrados">

            <div class="card shadow-sm">
              <img *ngIf="producto.imagen_producto"
              [src]="'http://localhost:8000/' + producto.imagen_producto"
              class="bd-placeholder-img card-img-top"
              alt="Foto del producto"
              width="200" height="200">
              <img *ngIf="!producto.imagen_producto" src="assets/images/descarga.jpeg" class="bd-placeholder-img card-img-top" alt="Imagen por defecto">
              <div class="card-body">
                <h5>{{ producto.nombre_producto }}</h5>
                <h5>${{ producto.precio }}</h5>

            <!-- <div class="rating">
              <input [value]="5" [name]="'rating' + producto.codigo_producto" [id]="'star5-' + producto.codigo_producto" type="radio">
              <label [for]="'star5-' + producto.codigo_producto"></label>

              <input [value]="4" [name]="'rating' + producto.codigo_producto" [id]="'star4-' + producto.codigo_producto" type="radio">
              <label [for]="'star4-' + producto.codigo_producto"></label>

              <input [value]="3" [name]="'rating' + producto.codigo_producto" [id]="'star3-' + producto.codigo_producto" type="radio">
              <label [for]="'star3-' + producto.codigo_producto"></label>

              <input [value]="2" [name]="'rating' + producto.codigo_producto" [id]="'star2-' + producto.codigo_producto" type="radio">
              <label [for]="'star2-' + producto.codigo_producto"></label>

              <input [value]="1" [name]="'rating' + producto.codigo_producto" [id]="'star1-' + producto.codigo_producto" type="radio">
              <label [for]="'star1-' + producto.codigo_producto"></label>
            </div>
                <p class="card-text">{{ producto.descripcion }}</p> -->

                <div class="d-flex justify-content-between align-items-center">
                  <button class="button" (click)="agregarAlCarrito(producto.codigo_producto)">
                    <span class="text">Agregar</span>
                    <span class="icon">
                      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke-linejoin="round" stroke-linecap="round" stroke="currentColor" fill="none">
                        <line x1="12" y1="5" x2="12" y2="19"></line>
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                      </svg>
                    </span>
                  </button>

                  <button class="btn btn-primary" (click)="verDetalleProducto(producto.codigo_producto)">Detalle del producto</button>
                  <!-- <button class="btn btn-outline-secondary" (click)="verDetalleProducto(producto.codigo_producto)">Detalle</button> -->
                </div>
              </div>
            </div>
          </ion-col>

        </div>
      </div>

    </div>

  </main>
  <footer class="footer">
    <div class="container">
      <p class="float-end">
        <a href="#" class="back-to-top">Volver arriba</a>
      </p>
      <p class="footer-text">
        &copy; 2024 <strong>GreenMarket</strong> Portafolio.
        <a href="#">Privacidad</a> &middot;
        <a href="#">Términos</a>
      </p>
    </div>
  </footer>
</ion-content>
